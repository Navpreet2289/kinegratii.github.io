---
title: Python3之旅（二）—— 数据类型与操作符
date: 2017-02-25 10:50:25
categories: 编程
tags:
- Python
---

关键字：长整数、八进制、除法、比较。

<!-- more -->


## 1 整数

- Python3.X不再有long的数据类型，合并到int中，因此像 `34023932232L`和 `34023932232l` 将引发语法错误。
- `sys.maxint`常量被移除，因为整数没有任何限制。然而常量 `sys.maxsize`在列表索引等情况下可以被认为正无穷。
- 八进制数使用更加明确的0o前缀，代码`t = 070`将产生语法错误，`int('070')`结果为70。

## 2 列表、字典和迭代器

一些常用的API不再返回列表

- 字典中  `dict.keys()`, `dict.items()` 和 `dict.values()` 等方法返回 “views” 。代码 `k = d.keys(); k.sort()`在3.X无法正常工作。应该使用内置的`sorted`函数 `k = sorted(d)`。
- `dict.iterkeys()`, `dict.iteritems()` 和 `dict.itervalues()`等方法不再支持。
- 内置函数 `map()` 和 `filter()` 返回迭代器，使用 `list(map())` 或者列表推导式返回数据列表。
- 3.X的`range` 函数同2.X的`xrange`一样，返回的是一个迭代器， `xrange` 在3.X被移除
- `zip`函数返回一个迭代器

### 3 除法

| 操作符 | Python2 | Python3 | 备注 |
| ------ | ------ | ------ | |
| /  | 地板除法 | 精确除法 | |
| // | 地板除法 | 地板除法 | |
| /  | 5 / 2 = 2 | 5 / 2 = 2.5 | |
| | 5.0 / 2 = 2.5 | 5.0 / 2 = 2.5 | |
| | 4 / 2 = 2 | 4 / 2 = 2.0 | |
| | 4.0 / 2 = 2.0 | 4.0 / 2 = 2.0 | |
| // | 5 // 2 = 2 | 5 // 2 = 2 | |
| | 5.0 // 2 = 2.0 | 5.0 // 2 = 2.0 | |
| | 4 // 2 = 2 | 4 // 2 = 2 | |
| | 4.0 // 2 = 2.0 | 4.0 // 2 = 2.0 | |

**应用实践**

- Python3中/执行的是精确除法，无论操作数的类型，都会返回一个浮点数。

### 4 比较

3.0 简化了比较规则：

- 当两个操作数类型不同，比较操作符（`> >= <= <`）将引发一个 `TypeError` 异常。因此像`1 < ''`、`0 > None` 、`len < len`、`None < None` 不再有效。同样的道理，不同类型组成的列表也不具有比较的意义。
- 当两个操作数属于不同类型时，`==`和`!=`操作符总是返回False和True
- `builtin.sort()`和`list.sorted()`不再支持cmp参数，应该使用key参数，注意的的是key和reverse参数必须以关键字方式传入。
- Python2中的 `builtin.cmp()`和类中的魔术方法`__cmp__`不推荐使用
